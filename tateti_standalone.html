<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tateti ClÃ¡sico - xpe.games</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #8b5cf6 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            color: white;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 500px;
            width: 100%;
        }

        .game-title {
            font-size: 2.5rem;
            color: #8b5cf6;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .game-subtitle {
            color: #64748b;
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }

        .tateti-board {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-template-rows: repeat(3, 100px);
            gap: 8px;
            background: #8b5cf6;
            padding: 12px;
            border-radius: 15px;
            margin: 2rem auto;
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.3);
        }

        .cell {
            background: white;
            border: 3px solid #8b5cf6;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #8b5cf6;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .cell:hover {
            background: #f1f5f9;
            transform: scale(1.05);
        }

        .cell.X {
            color: #dc2626;
        }

        .cell.O {
            color: #2563eb;
        }

        .cell.filled {
            cursor: default;
        }

        .game-info {
            margin: 2rem 0;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .score {
            background: rgba(139, 92, 246, 0.1);
            padding: 1rem;
            border-radius: 10px;
            min-width: 120px;
        }

        .score h3 {
            color: #8b5cf6;
            margin-bottom: 0.5rem;
        }

        .score span {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1e293b;
        }

        .current-player {
            font-size: 1.2rem;
            margin: 1rem 0;
            padding: 0.5rem 1rem;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 25px;
            display: inline-block;
        }

        .current-player.X {
            color: #dc2626;
        }

        .current-player.O {
            color: #2563eb;
        }

        .game-controls {
            margin-top: 2rem;
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: #8b5cf6;
            color: white;
        }

        .btn-primary:hover {
            background: #7c3aed;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 92, 246, 0.4);
        }

        .btn-secondary {
            background: #64748b;
            color: white;
        }

        .btn-secondary:hover {
            background: #475569;
            transform: translateY(-2px);
        }

        .winner {
            animation: winnerPulse 0.6s ease-in-out;
        }

        @keyframes winnerPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .winning-cell {
            background: #10b981 !important;
            color: white !important;
            animation: winningGlow 1s ease-in-out;
        }

        @keyframes winningGlow {
            0%, 100% { box-shadow: 0 0 10px rgba(16, 185, 129, 0.5); }
            50% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.8); }
        }

        @media (max-width: 600px) {
            .game-container {
                padding: 1rem;
                margin: 1rem;
            }
            
            .game-title {
                font-size: 2rem;
            }
            
            .tateti-board {
                grid-template-columns: repeat(3, 80px);
                grid-template-rows: repeat(3, 80px);
            }
            
            .cell {
                font-size: 2.5rem;
            }
            
            .game-info {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="game-title">ðŸŽ¯ Tateti ClÃ¡sico</h1>
        <p class="game-subtitle">Â¡El juego que nunca pasa de moda!</p>
        
        <div class="current-player">Jugador actual: <span id="currentPlayer" class="X">X</span></div>
        
        <div class="tateti-board" id="gameBoard">
            <div class="cell" data-index="0"></div>
            <div class="cell" data-index="1"></div>
            <div class="cell" data-index="2"></div>
            <div class="cell" data-index="3"></div>
            <div class="cell" data-index="4"></div>
            <div class="cell" data-index="5"></div>
            <div class="cell" data-index="6"></div>
            <div class="cell" data-index="7"></div>
            <div class="cell" data-index="8"></div>
        </div>
        
        <div class="game-info">
            <div class="score">
                <h3>Jugador X</h3>
                <span id="scoreX">0</span>
            </div>
            <div class="score">
                <h3>Jugador O</h3>
                <span id="scoreO">0</span>
            </div>
            <div class="score">
                <h3>Empates</h3>
                <span id="scoreDraws">0</span>
            </div>
        </div>
        
        <div class="game-controls">
            <button class="btn btn-primary" onclick="resetGame()">Nuevo Juego</button>
            <button class="btn btn-secondary" onclick="resetScores()">Reiniciar PuntuaciÃ³n</button>
            <a href="https://xpe-hub.github.io/xpe-games-portal/" class="btn btn-primary">Volver al Portal</a>
        </div>
    </div>

    <script>
        let gameBoard = Array(9).fill('');
        let currentPlayer = 'X';
        let gameActive = true;
        let scores = { X: 0, O: 0, draws: 0 };

        const winningCombinations = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8], // Filas
            [0, 3, 6], [1, 4, 7], [2, 5, 8], // Columnas
            [0, 4, 8], [2, 4, 6] // Diagonales
        ];

        function initGame() {
            // Cargar puntuaciones guardadas
            const savedScores = localStorage.getItem('tateti-scores');
            if (savedScores) {
                scores = JSON.parse(savedScores);
            }
            updateScores();
            
            // Reiniciar el juego
            resetGame();
        }

        function checkWinner() {
            for (let combination of winningCombinations) {
                const [a, b, c] = combination;
                if (gameBoard[a] && gameBoard[a] === gameBoard[b] && gameBoard[a] === gameBoard[c]) {
                    return { winner: gameBoard[a], combination: combination };
                }
            }
            
            if (!gameBoard.includes('')) {
                return { winner: 'draw' };
            }
            
            return null;
        }

        function makeMove(cellIndex) {
            if (!gameActive || gameBoard[cellIndex]) return;

            gameBoard[cellIndex] = currentPlayer;
            const cell = document.querySelector(`[data-index="${cellIndex}"]`);
            cell.textContent = currentPlayer;
            cell.classList.add(currentPlayer, 'filled');

            const result = checkWinner();

            if (result) {
                gameActive = false;
                
                if (result.winner === 'draw') {
                    showMessage('Â¡Empate! ðŸ¤');
                    scores.draws++;
                } else {
                    showMessage(`Â¡Jugador ${result.winner} gana! ðŸŽ‰`);
                    scores[result.winner]++;
                    
                    // Resaltar celdas ganadoras
                    result.combination.forEach(index => {
                        document.querySelector(`[data-index="${index}"]`).classList.add('winning-cell');
                    });
                }
                
                saveScores();
                updateScores();
            } else {
                currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
                updateCurrentPlayer();
            }
        }

        function updateCurrentPlayer() {
            const playerElement = document.getElementById('currentPlayer');
            playerElement.textContent = currentPlayer;
            playerElement.className = currentPlayer;
        }

        function updateScores() {
            document.getElementById('scoreX').textContent = scores.X;
            document.getElementById('scoreO').textContent = scores.O;
            document.getElementById('scoreDraws').textContent = scores.draws;
        }

        function saveScores() {
            localStorage.setItem('tateti-scores', JSON.stringify(scores));
        }

        function resetGame() {
            gameBoard = Array(9).fill('');
            currentPlayer = 'X';
            gameActive = true;
            
            document.querySelectorAll('.cell').forEach(cell => {
                cell.textContent = '';
                cell.className = 'cell';
            });
            
            updateCurrentPlayer();
            hideMessage();
        }

        function resetScores() {
            if (confirm('Â¿EstÃ¡s seguro de que quieres reiniciar todas las puntuaciones?')) {
                scores = { X: 0, O: 0, draws: 0 };
                saveScores();
                updateScores();
                resetGame();
            }
        }

        function showMessage(message) {
            const existingMessage = document.querySelector('.game-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'game-message';
            messageDiv.innerHTML = `<h2 style="color: #10b981; margin: 1rem 0; font-size: 1.5rem;">${message}</h2>`;
            
            const gameContainer = document.querySelector('.game-container');
            gameContainer.insertBefore(messageDiv, document.querySelector('.game-controls'));
        }

        function hideMessage() {
            const message = document.querySelector('.game-message');
            if (message) {
                message.remove();
            }
        }

        // Event listeners
        document.querySelectorAll('.cell').forEach(cell => {
            cell.addEventListener('click', function() {
                const index = parseInt(this.dataset.index);
                makeMove(index);
            });
        });

        // Inicializar el juego
        initGame();
    </script>
</body>
</html>